There is no compile-time checking that the transitions are valid.

How difficult would it be to convert to a hierarchical state machine?
